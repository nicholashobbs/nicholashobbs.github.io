<!DOCTYPE HTML>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<title> </title>
		<script>
			window.onload = function() {
				var item, complete, list;
				list = document.getElementById('list');

				if (typeof(localStorage) == 'undefined') {
					list.innerHTML = 'Sorry, you need a browser that supports localStorage.';
					document.getElementById('add').disabled = true;
				} else {
					try {
						var keys = localStorage.getItem('__keys').split(',');
						for (k in keys) {
							k = keys[k].replace(/ /g,'');
							if (k) {
								item = localStorage.getItem(k);
								complete = localStorage.getItem(k + '_complete');
								if (complete === 'true') list.innerHTML += '<li class="complete"> <input type="checkbox" id="'+ k +'" onclick="checkedItem(this)" checked> ' + item;
								else list.innerHTML += '<li class="incomplete"> <input type="checkbox" id="'+ k +'" onclick="checkedItem(this)"> ' + item;
							}
						}
					} catch (e) { localStorage.setItem('__keys', ''); }
				}
			};

			var addItem = function() {
				// attempt unique name
				var item, val, key;
				item = document.getElementById('item').value;
				val = item.split(' ');

				key = '';
				for (v in val) {
					v = val[v];
					key = key + v.substring(0,1);
				}

				key = key.toLowerCase();
				localStorage.setItem(key, item);
				localStorage.setItem(key + '_complete', false);
				document.getElementById('list').innerHTML += '<li class="incomplete"> <input type="checkbox" id="'+ k +'" onclick="checkedItem(this)"> ' + item;

				// update key list
				var keylist = localStorage.getItem('__keys') + key + ',';
				localStorage.setItem('__keys', keylist);
			};

			var checkedItem = function(ele) {
				if (ele.checked) {
					ele.parentNode.className = 'complete';
					localStorage.setItem(ele.id+'_complete', 'true');
				} else {
					ele.parentNode.className = 'incomplete';
					localStorage.setItem(ele.id+'_complete', 'false');
				}
			};
		</script>

		<style>
			header { font-size: 12pt; }
			input { font-size: 10pt; }
			input#item { width: 350px; }
			li { font-size: 10pt; list-style: none; }

			.content { position:absolute; top: 10px; left: 10px; width: 400px; margin: 0 auto; }
			.incomplete { font-weight: bold; }
			.complete { text-decoration: line-through; }
      .close{position:relative; float:right; height: 10px; width: 10px; background-color: #000;}

		</style>
	</head>
	<body>
		<div class="content">
			<header>
				Todo List
			</header>

				<input type="text" id="item">  <input type="button" value="Add" id="add" onclick="addItem()">
				<div id="list"></div>

		</div>
	</body>
</html>
